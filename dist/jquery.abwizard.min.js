/*! jQuery ABWizard - v0.0.1 - 2013-05-26
* https://github.com/abiee/abwizard
* Copyright (c) 2013 Abiee Alejandro Echamea MÃ¡rquez; Licensed MIT */
(function(t){t.fn.ABWizard=function(i){function n(n,e){var o,a=t("#"+n),r=t("#"+e.currentStep);0!==a.length&&(t.isFunction(i.beforeShowStep)&&(o=i.beforeShowStep(this,a,r),o===!1)||(!a.hasClass("step-ajax")||!a.data("reload")&&a.data("loaded")||(t.isFunction(i.beforeAjaxLoad)&&i.beforeAjaxLoad(this,a),a.load(a.data("href"),function(n,o){"error"===o?t.isFunction(i.onAjaxError)&&i.onAjaxError(this,a):(e._setup_buttons(a),a.data("loaded","true"),t.isFunction(i.afterAjaxLoad)&&i.afterAjaxLoad(this,a))})),t.isFunction(i.onHideStep)&&(o=i.onHideStep(this,a),o===!1)||(r.hide(),a.show(),e.currentStep=n,e.stepNavigation!==void 0&&(e.stepNavigation.find("."+r.attr("id")).removeClass("active"),e.stepNavigation.find("."+a.attr("id")).addClass("active")),t.isFunction(i.onShowStep)&&i.onShowStep(this,a))))}function e(i,e){return i!==void 0&&i.find("a.step-link").bind("click",function(i){i.preventDefault();var o=t(i.currentTarget).attr("href").replace(/#/g,"");n(o,e)}),i}var o={stepNavigation:"#abwizard-navigation",stepOnLoad:void 0,beforeAjaxLoad:void 0,afterAjaxLoad:void 0,onAjaxError:void 0,beforeShowStep:void 0,onShowStep:void 0,onHideStep:void 0};i=t.extend(o,i);var a={_init:function(i,n){this.container=t(i),this.container.find(".step").hide(),this.stepNavigation=e(t(n.stepNavigation),this),this._setup_buttons(),this.currentStep="",this.goto(n.stepOnLoad)},_setup_buttons:function(i){var n=this,e=this.container;i!==void 0&&(e=i);var o=e.find(".wizard-action-button");t.each(o,function(i,e){t(e).bind("click",function(i){var e=t(i.currentTarget).data("step");e===void 0?n.first():n.goto(e)})}),o=e.find(".wizard-next-button"),t.each(o,function(i,e){t(e).bind("click",function(){n.next()})}),o=e.find(".wizard-previous-button"),t.each(o,function(i,e){t(e).bind("click",function(){n.previous()})})},first:function(){var t=this.container.find(".step:first");n(t.attr("id"),this)},last:function(){var t=this.container.find(".step:last");n(t.attr("id"),this)},next:function(){var t=this.container.find("#"+this.currentStep).next();t.hasClass("step")&&n(t.attr("id"),this)},previous:function(){var t=this.container.find("#"+this.currentStep).prev();t.hasClass("step")&&n(t.attr("id"),this)},"goto":function(t){if(t===void 0)this.first();else{if(this.currentStep===t)return;n(t,this)}}};return a._init(this,i),a}})(jQuery);